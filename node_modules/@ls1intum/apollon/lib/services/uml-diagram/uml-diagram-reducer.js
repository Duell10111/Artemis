"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var uml_diagram_1 = require("./uml-diagram");
exports.UMLDiagramReducer = function (state, action) {
    if (state === void 0) { state = new uml_diagram_1.UMLDiagram(); }
    switch (action.type) {
        case "@@element/diagram/APPEND" /* APPEND */: {
            var payload = action.payload;
            return tslib_1.__assign(tslib_1.__assign({}, state), { ownedRelationships: tslib_1.__spread(new Set(tslib_1.__spread(payload.ids, state.ownedRelationships))).reverse() });
        }
        case "@@element/container/APPEND" /* APPEND */: {
            var payload_1 = action.payload;
            if (state.id !== payload_1.owner) {
                return tslib_1.__assign(tslib_1.__assign({}, state), { ownedElements: state.ownedElements.filter(function (id) { return !payload_1.ids.includes(id); }) });
            }
            return tslib_1.__assign(tslib_1.__assign({}, state), { ownedElements: tslib_1.__spread(new Set(tslib_1.__spread(state.ownedElements, payload_1.ids))) });
        }
        case "BRING_TO_FRONT" /* BRING_TO_FRONT */: {
            var ids_1 = action.payload.ids;
            // order in svg 1.2 is defined by rendering order -> change rendering order to draw one element in front of another
            return tslib_1.__assign(tslib_1.__assign({}, state), { ownedElements: tslib_1.__spread(state.ownedElements).filter(function (id) { return !ids_1.includes(id); }).concat(ids_1) });
        }
        case "@@element/container/REMOVE" /* REMOVE */: {
            var payload_2 = action.payload;
            return tslib_1.__assign(tslib_1.__assign({}, state), { ownedElements: state.ownedElements.filter(function (id) { return !payload_2.ids.includes(id); }), ownedRelationships: state.ownedRelationships.filter(function (id) { return !payload_2.ids.includes(id); }) });
        }
        case "@@element/resizable/RESIZE" /* RESIZE */: {
            var payload = action.payload;
            if (!payload.ids.includes(state.id)) {
                break;
            }
            return tslib_1.__assign(tslib_1.__assign({}, state), { bounds: tslib_1.__assign(tslib_1.__assign({}, state.bounds), { width: state.bounds.width + payload.delta.width, height: state.bounds.height + payload.delta.height }) });
        }
    }
    return state;
};
//# sourceMappingURL=uml-diagram-reducer.js.map